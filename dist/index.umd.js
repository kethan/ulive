!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).ulive={})}(this,(function(e){let t,l;const n=e=>(e.toJSON=e.then=e.toString=e.valueOf=()=>e.value,e),o=(e,o,f=new Set)=>n({get value(){return t?.deps.push(f.add(t)),e},set value(t){if(t!==e){e=t;for(let e of f)l?l.add(e):e()}},peek:()=>e}),f=(e,l,n,o)=>(o=(n=o=>{l?.call?.(),o=t,t=n;try{l=e()}finally{t=o}}).deps=[],n(),e=>{for(l?.call?.();e=o.pop();)e.delete(n)});e.batch=e=>{let t=l;t||(l=new Set);try{e()}finally{if(!t){t=l,l=null;for(const e of t)e()}}},e.computed=(e,t=o(),l,u)=>n({get value(){return u||=f((()=>t.value=e())),t.value},peek:t.peek}),e.effect=f,e.signal=o,e.untracked=(e,l,n)=>(l=t,t=null,n=e(),t=l,n),Object.defineProperty(e,"__esModule",{value:!0})}));